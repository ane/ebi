

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Presentation Layer &mdash; Entity–Boundary–Interactor 0.1.0-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Entity–Boundary–Interactor 0.1.0-alpha documentation" href="index.html"/>
        <link rel="next" title="The Boundary Layer" href="boundary.html"/>
        <link rel="prev" title="Overview" href="overview.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Entity–Boundary–Interactor
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Entity–Boundary–Interactor</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design Goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">The Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="structuring.html">Structuring Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifecycles.html">Event Lifecycles</a></li>
</ul>
<p class="caption"><span class="caption-text">Layers</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">The Presentation Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="boundary.html">The Boundary Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html">The Core Layer</a></li>
</ul>
<p class="caption"><span class="caption-text">In Practice</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="external.html">Talking to the External World</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example.html">A REST API</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Entity–Boundary–Interactor</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>The Presentation Layer</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-presentation-layer">
<h1>The Presentation Layer<a class="headerlink" href="#the-presentation-layer" title="Permalink to this headline">¶</a></h1>
<p>The introduction of the API layer at this point may seem a bit
heavy-handed. Why not map the interactor methods directly to routes? I
mean, you could spin up a web server that handles Sinatra-like requests
and then points them to the right interactor and returns a serialized
version of whatever the interactor spewed out.</p>
<p>Indeed, if you have <em>one</em> interactor or a couple that don&#8217;t ever do
business together, this seems like the right approach. Once you get too
many, it gets useful to wrap them underneath a single unit.</p>
<p>Suppose you have an API endpoint of a book catalogue, and you want to
implement functionality that that modifies a particular author and at
the same time transfers these modifications to the publications. You
receive the new author name as input, and then you must update the
author itself and their book catalogue in one go.</p>
<p>Sure, sounds easy, just create a <code class="docutils literal"><span class="pre">ModifyCatalogue</span></code> functionality into
the <code class="docutils literal"><span class="pre">Author</span></code> interactor. The interactor, in this case, would modify
the author&#8217;s name, then loop over its <code class="docutils literal"><span class="pre">Book</span></code>s and modify them
individually, finally sending the updates to a database. This system
works as long as the <code class="docutils literal"><span class="pre">Book</span></code> entities are under the sole ownership of
an <code class="docutils literal"><span class="pre">Author</span></code>&#8211;that is, there is no way of adding, creating, deleting,
or modifying a book from outside.</p>
<p>As soon as you introduce a <code class="docutils literal"><span class="pre">Book</span></code> interactor into the mix, things
start to get hairy. The <code class="docutils literal"><span class="pre">Author</span></code> service, retaining its book
modification logic, now overlaps with the <code class="docutils literal"><span class="pre">Book</span></code> service. The imminent
solution to this is to lift this logic from the <code class="docutils literal"><span class="pre">Author</span></code> interactor to
the <code class="docutils literal"><span class="pre">Book</span></code> interactor, making the layout look like this.</p>
<div class="figure" id="id1">
<img alt="a problem" src="_images/book-author-problem.png" />
<p class="caption"><span class="caption-text">Could the blue arrow be removed, and contained inside the arrows
from the API layer pointing towards the Service layer?</span></p>
</div>
<p>The blue dashed arrow can be lifted into the API layer with little extra
work. It&#8217;s a good idea to push such arrows as far &#8220;up&#8221; as possible,
because this helps keep one thing in check: not violating the <strong>single
responsibility principle</strong>, which roughly means that your interactor
should do one thing and <strong>one thing only</strong>. So the Author interactor
should only care about author logic, and the Book interactor should care
only about book issues.</p>
<p>In the above example this process would not be violated if there was no
Book service, such that book-related logic was underneath the Author
interactor. But, as soon as you start sharing responsibilities, and they
start to overlap, you will run into problems.</p>
<p>Hence, the API layer is there to provide additional logic that ties two
interactors together. You could think of it as a <em>meta-interactor</em>,
something that operates on interactors only, but contains no low-level
business logic.</p>
<p>What is more, the API layer usually has some knowledge of the
application domain: while interactors deal with dumb objects (DTOs), the
API may be dealing with HTTP request objects. Thus, the API is closer to
the actual implementation.</p>
<p>Consequently, the <strong>Core</strong> layer is the non-duplicated, non-overlapping
part of the application: you may have multiple APIs for the same set of
interactors, and multiple <em>hosts</em> for each API, but at the fundamental
level, there&#8217;s only one canonical implementation of the core.</p>
<p>To conclude, the key differences between an API and an interactor are
the following:</p>
<ul class="simple">
<li>An API is domain-specific and knows about the target implementation.
The API knows it is talking to a web server. It just doesn&#8217;t know
<em>which kind</em> of web server it is talking to, acting as a bridge
between interactors and the delivery mechanism.</li>
<li>The API layer may tie a multitude of interactors together, without
making them dependent on each other, enforcing loose coupling.</li>
<li>APIs can be seen as &#8220;meta-interactors&#8221;, operating on interactors the
same way interactors operate on entities.</li>
</ul>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="boundary.html" class="btn btn-neutral float-right" title="The Boundary Layer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Antoine Kalmbach.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>